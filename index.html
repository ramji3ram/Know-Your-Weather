<html>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="weather.css">

<script src="js/jquery-2.1.4.min.js" ></script>
<script  src="js/bootstrap.min.js"></script>
<head>
<h1 class="text-center">
	Know your Weather
</h1>
</head>

<div class="icon sun-shower">
  <div class="cloud"></div>
  <div class="sun">
    <div class="rays"></div>
  </div>
  <div class="rain"></div>
</div>


<div class="text"  >
Location: <input id="ip" type="text" name="fname"><br>



<p id="Location">
	
</p>

<p id="Weather">
	
</p>

<p id="temp">
	
</p>



</div>






<script type="text/javascript">
	
var city;

function weather(latitude,longitude)
{
$.getJSON("http://api.openweathermap.org/data/2.5/weather?lat=" 
	+ latitude + "&lon=" + longitude + "&units=metric&APPID=02c053d1e9b7489c5e900cb6ef30e23a",
	function(a){
		console.log(a);
var locName=a.name;
var weatherType=a.weather[0].description;
var temperature=a.main.temp;
console.log(temperature);

	
	$("#Location").html("<p>The current Location is "+locName+"</p>");
$("#Weather").html("<p>The current weather is "+weatherType+"</p>");

$("#temp").html("<p>The current weather is "+temperature+"&deg;C</p>");

});
}

$("#ip").change(function(){
/*city = $("#ip").val();
*/	
city = $("#ip").val();
$.getJSON("http://api.openweathermap.org/data/2.5/weather?q=" + city + "&units=metric&APPID=02c053d1e9b7489c5e900cb6ef30e23a",
	function(a){
		console.log(a);
var locName=a.name;
var weatherType=a.weather[0].description;

var temperature=a.main.temp;
console.log(temperature);

	
	$("#Location").html("<p>The current Location is "+locName+"</p>");
$("#Weather").html("<p>The current weather is "+weatherType+"</p>");

$("#temp").html("<p>The current Temperature is "+temperature+"&deg;C</p>");

});

});


if(!navigator.geolocation)
{
	alert("Browser doesn't support this app");
}
else
{
	navigator.geolocation.getCurrentPosition(sucess);
}

function sucess(position)
{
var lat=position.coords.latitude;
var lon=position.coords.longitude;
weather(lat,lon);
}


</script>

</html>